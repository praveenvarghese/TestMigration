/*!
 * @AIMMS_FILE=models/TableSortingDialog/TableFilteringTest.aimms
 */

scenario("Validate fixing the sorting will not the existing sorting applied.", () => {
	loadPage("Main Project/Sorting/Sorted Table");

	findWidget("Sorted_Table_1")
		.getGridValues()
		.should.be.shallowDeepEqual([
			[
				"408.46",
				"115.49",
				"471.46",
				"115.95",
				"314.60",
				"87.52",
				"465.02",
				"280.81",
				"339.12",
				"481.23",
			],
			[
				"329.36",
				"365.76",
				"311.51",
				"219.91",
				"241.37",
				"253.97",
				"113.64",
				"126.99",
				"445.17",
				"188.20",
			],
			[
				"149.49",
				"340.34",
				"496.31",
				"341.64",
				"292.93",
				"198.63",
				"23.88",
				"65.77",
				"408.86",
				"160.81",
			],
		]);

	findWidget("Sorted_Table_2")
		.getGridValues()
		.should.be.shallowDeepEqual([
			[
				"149.49",
				"292.24",
				"340.34",
				"167.79",
				"496.31",
				"327.28",
				"341.64",
				"56.74",
				"292.93",
				"345.23",
				"198.63",
				"71.84",
				"23.88",
				"383.08",
				"65.77",
			],
			[
				"329.36",
				"357.38",
				"365.76",
				"263.98",
				"311.51",
				"218.88",
				"219.91",
				"179.06",
				"241.37",
				"73.86",
				"253.97",
				"385.85",
				"113.64",
				"492.86",
				"126.99",
			],
			[
				"408.46",
				"249.10",
				"115.49",
				"186.68",
				"471.46",
				"355.83",
				"115.95",
				"1.85",
				"314.60",
				"3.57",
				"87.52",
				"383.33",
				"465.02",
				"179.04",
				"280.81",
			],
		]);

	findWidget("Sorted_Table_1")
		.isColSortOptionDisplayed(0)
		.should.be.equal(true);

	findWidget("Sorted_Table_2")
		.isColSortOptionDisplayed(0)
		.should.be.equal(true);

	findWidget("Sorted_Table_2")
		.getCell(0, 0)
		.click();

	getPageHeader()
		.getButtons()
		.getAttentionButton()
		.click();

	findDialog().clickResolveButton(1);

	findDialog().clickResolveButton(1);

	findDialog()
		.findButton("Close")
		.click();

	findWidget("Sorted_Table_1")
		.isColSortOptionDisplayed(0)
		.should.be.equal(true);

	findWidget("Sorted_Table_1")
		.getGridValues()
		.should.be.shallowDeepEqual([
			[
				"408.46",
				"115.49",
				"471.46",
				"115.95",
				"314.60",
				"87.52",
				"465.02",
				"280.81",
				"339.12",
				"481.23",
			],
			[
				"329.36",
				"365.76",
				"311.51",
				"219.91",
				"241.37",
				"253.97",
				"113.64",
				"126.99",
				"445.17",
				"188.20",
			],
			[
				"149.49",
				"340.34",
				"496.31",
				"341.64",
				"292.93",
				"198.63",
				"23.88",
				"65.77",
				"408.86",
				"160.81",
			],
		]);

	findWidget("Sorted_Table_2")
		.getGridValues()
		.should.be.shallowDeepEqual([
			[
				"149.49",
				"292.24",
				"340.34",
				"167.79",
				"496.31",
				"327.28",
				"341.64",
				"56.74",
				"292.93",
				"345.23",
				"198.63",
				"71.84",
				"23.88",
				"383.08",
				"65.77",
			],
			[
				"329.36",
				"357.38",
				"365.76",
				"263.98",
				"311.51",
				"218.88",
				"219.91",
				"179.06",
				"241.37",
				"73.86",
				"253.97",
				"385.85",
				"113.64",
				"492.86",
				"126.99",
			],
			[
				"408.46",
				"249.10",
				"115.49",
				"186.68",
				"471.46",
				"355.83",
				"115.95",
				"1.85",
				"314.60",
				"3.57",
				"87.52",
				"383.33",
				"465.02",
				"179.04",
				"280.81",
			],
		]);

	findWidget("Sorted_Table_2")
		.isColSortOptionDisplayed(0)
		.should.be.equal(true);
});
